<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="script-src 'self'">
    <title>再次到达的星空～新生之芽与抉择之歌，以希望之躯</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <div class="sidebar-content">
                <h2>设置</h2>
                <div class="section">
                    <h3>规则列表 (按顺序执行)</h3>
                    <ul id="command-list"></ul>
                    <div class="button-group">
                        <button id="add-include-btn" class="action-btn include">添加包含文件夹</button>
                        <button id="add-exclude-btn" class="action-btn exclude">添加排除文件夹</button>
                        <!-- 新增保存按钮 -->
                        <button id="save-rules-btn" class="action-btn save">保存规则</button>
                    </div>
                    <!-- 新增状态消息区域 -->
                    <p id="config-status"></p>
                </div>
                
                <div class="section">
                    <h3>过滤模式</h3>
                    <div class="radio-group">
                        <label><input type="radio" name="filter" value="all" checked> 混合</label>
                        <label><input type="radio" name="filter" value="images"> 仅图片</label>
                        <label><input type="radio" name="filter" value="videos"> 仅视频</label>
                    </div>
                </div>

                <div class="section">
                    <!-- 将两个主要按钮放在一个容器里，方便布局 -->
                    <div class="main-action-group">
                        <button id="next-btn" class="main-action" title="全局随机 (空格)">下一张</button>
                        <!-- 新增局部随机按钮 -->
                        <button id="next-local-btn" class="main-action local" title="在当前文件夹内随机 (Tab)">下一张 (局部)</button>
                    </div>
                    <p id="file-count">最终文件数: 0</p>
                </div>
            </div>

            <div class="sidebar-toggle-wrapper">
                <button id="sidebar-toggle-btn" title="收起/展开侧边栏 (T)">‹</button>
            </div>
        </aside>



        <main class="viewer">
            <div id="display-area">
                <p id="info-text">请先添加规则，然后点击“下一张”</p>
                <img id="image-viewer" class="media-element" style="display:none;" />
                <video id="video-viewer" class="media-element" style="display:none;" controls></video>
                <p id="file-path"></p>
            </div>
        </main>
    </div>

    <script src="./renderer.js"></script>
</body>
</html>